- name: "Ensure folder exists"
  file:
    state: directory 
    dest: "{{ ansible_env.HOME }}/.local/bin"
  tags:
    - command

- name: "Install aptlib pip"
  apt:
    name:
      - python3-apt
      - python-setuptools
  become: True

- name: "Install vagrant from source"
  apt:
    deb: "https://releases.hashicorp.com/vagrant/2.2.9/vagrant_2.2.9_x86_64.deb"

  become: True
  tags:
    - command

- name: "Install dependencies of the executable"
  pip:
    executable: pip3
    name:
      - gitpython
      - python-dateutil
  tags:
    - command

- name: "Symlink Devsible shortcut"
  file:
    src: "{{ own_code_path }}/devsible/files/devsible.py"
    dest: "{{ ansible_env.HOME }}/.local/bin/devsible"
    state: link
  tags:
    - command
